
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="dist/css/dc.css"/>
</head>
<body>

<div id="test"></div>
<div id="pieChart"> </div>
<div id="rowChart"> </div>



<script type="text/javascript" src="dist/js/d3.js"></script>
<script type="text/javascript" src="dist/js/crossfilter.js"></script>
<script type="text/javascript" src="dist/js/dc.js"></script>
<script type="text/javascript">
var chart = dc.seriesChart("#test");
var ndx, runDimension, runGroup;

	
d3.csv("IM_Data.csv", function(error, experiments) {
  ndx = crossfilter(experiments);
  runDimension = ndx.dimension(function(d) {return [d.Exchange, d.MarginDate]; });
  runGroup = runDimension.group().reduceSum(function(d) { return d.IM; });
  chart
    .width(768)
    .height(480)
    .chart(function(c) { return dc.lineChart(c).interpolate('basis'); })
    .x(d3.scale.linear().domain([0,20]))
    .brushOn(false)
    .yAxisLabel("Initial Margins")
    .xAxisLabel("MarginDate")
    .clipPadding(10)
    .elasticY(true)
    .dimension(runDimension)
    .group(runGroup)
    .mouseZoomable(true)
    .seriesAccessor(function(d) {return "Exchange: " + d.key[0];})
    .keyAccessor(function(d) {return +d.key[1];})
    .valueAccessor(function(d) {return +d.value ;})
    .legend(dc.legend().x(350).y(350).itemHeight(13).gap(5).horizontal(1).legendWidth(140).itemWidth(70));
  chart.yAxis().tickFormat(function(d) {return d3.format(',d')(d);});
  chart.margins().left += 40;
  dc.renderAll();
});

	
	var data = [{
    "city": "New York",
        "neighborhood": "N/A",
        "hits": 200
}, {
    "city": "New York",
        "neighborhood": "Brooklyn",
        "hits": 225
}, {
    "city": "New York",
        "neighborhood": "Queens",
        "hits": 1
}, {
    "city": "San Francisco",
        "neighborhood": "Chinatown",
        "hits": 268
}, {
    "city": "San Francisco",
        "neighborhood": "Downtown",
        "hits": 22
}, {
    "city": "Seattle",
        "neighborhood": "N/A",
        "hits": 20
}, {
    "city": "Seattle",
        "neighborhood": "Freemont",
        "hits": 25
}];
var pieChart = dc.pieChart("#pieChart"),
    rowChart = dc.rowChart("#rowChart");
var ndx = crossfilter(data),
    cityDimension = ndx.dimension(function (d) {
        return d.city;
    }),
    cityGroup = cityDimension.group().reduceSum(function (d) {
        return d.hits;
    }),
    neighborhoodDimension = ndx.dimension(function (d) {
        return d.neighborhood;
    }),
    neighborhoodGroup = neighborhoodDimension.group().reduceSum(function (d) {
        return d.hits;
    });

pieChart.width(200)
    .height(200)
    .slicesCap(4)
    .dimension(cityDimension)
    .group(cityGroup);

rowChart.width(500)
    .height(500)
    .dimension(neighborhoodDimension)
    .group(neighborhoodGroup);

dc.renderAll();
</script>

</body>
</html>